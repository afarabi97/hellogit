---

######################################################
# Perform Elasticsearch resource requirements checks #
######################################################

- name: Verify Elasticsearch jvm memory does not exceed 30GB
  fail:
    msg: 'For optimization, Elasticsearch jvm memory should not exceed 30GB. See https://www.elastic.co/guide/en/elasticsearch/reference/current/heap-size.html'
  when: inventory_hostname in groups['elasticsearch'] and elastic_data_jvm_memory > 30

...
