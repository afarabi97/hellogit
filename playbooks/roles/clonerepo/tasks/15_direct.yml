---

- name: "Create directory for misc"
  file:
    path: "{{ rockoffline_dir }}/misc"
    state: directory
    mode: 0755
    owner: root
    group: root

- name: "Create directory for misc"
  file:
    path: "{{ rockoffline_dir }}/misc"
    state: directory
    mode: 0755
    owner: root
    group: root

- block:
  - name: "Download all other direct download files into local repository, including dependencies"
    get_url:
      url: "{{ item }}" 
      dest: "{{ rockoffline_dir }}/misc"
    with_items:
      - "{{ direct_download_package_names }}"
    when: "'.rpm' in item"

  - name: "Download all other direct download files into local repository, including dependencies"
    get_url:
      url: "{{ item }}" 
      dest: "{{ rockoffline_dir }}"
    with_items:
      - "{{ direct_download_package_names }}"
    when: "'.rpm' not in item"
  when: TFPLENUM_LABREPO == false

- block:
  - name: "Download all other direct download files into local repository, including dependencies from labrepo"
    get_url:
      url: "{{ item }}" 
      dest: "{{ rockoffline_dir }}/misc"
    with_items:
      - "{{ labrepo_direct_download_package_names }}"
    when: "'.rpm' in item"

  - name: "Download all other direct download files into local repository, including dependencies from labrepo"
    get_url:
      url: "{{ item }}" 
      dest: "{{ rockoffline_dir }}"
    with_items:
      - "{{ labrepo_direct_download_package_names }}"
    when: "'.rpm' not in item"
  when: TFPLENUM_LABREPO