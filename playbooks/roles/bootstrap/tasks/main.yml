---

- import_tasks: cleanup.yml

- set_fact:
    BOOTSTRAP: "{{ lookup('env','BOOTSTRAP') }}"

- import_tasks: public_repos.yml
  when: TFPLENUM_LABREPO == false

- import_tasks: labrepo.yml     
  when: TFPLENUM_LABREPO

- name: "Install required packages"
  yum:
    name: "{{ item }}"
    state: latest
  with_items:
    - "{{ package_list }}"

- name: Execute clone repo role.
  include_role: 
    name: clonerepo

- name: Execute docker registry role.  
  include_role: 
    name: registry

- import_tasks: cleanup.yml
- import_tasks: local_repos.yml