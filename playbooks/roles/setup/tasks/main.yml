---
- name: "Configure epel repo"
  yum_repository:
    name: "{{ epel_repo.name }}"
    description: "{{ epel_repo.name }}repo"
    failovermethod: "{{ epel_repo.failovermethod }}"
    metalink: "{{ epel_repo.metalink }}"
    enabled: true
    gpgcheck: "{{ epel_repo.gpgcheck }}"
    gpgkey: "{{ epel_repo.gpgkey}}"

- name: "Install required packages"
  yum:
    name: "{{ item }}"
    state: latest
  with_items:
    - "{{ package_list }}"