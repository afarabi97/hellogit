DIP Robot Tests:
  stage: robot-test
  tags:
    - tfplenum-buildv2
  script: |
    echo "IP of runner is $(hostname -I)"
    echo "Current working directory is $(pwd)"
    CONFLUENCE_PASSWORD_DECRYPTED=$(echo "$CONFLUENCE_PASSWORD" | base64 -d)
    python3 testing/pipeline/pipeline.py --system-name "DIP" run-robot \
    --tfplenum-robot-container "tfplenum/robot-automator:1.3.0" \
    --jira-username "$CONFLUENCE_USERNAME" \
    --jira-password "$CONFLUENCE_PASSWORD_DECRYPTED" \
    --jira-report $ROBOT_REGRESSION_ZEPHYR_CYCLE \
    --jira-project-version $ROBOT_REGRESSION_ZEPHYR_PROJECT_VERSION \
    --jira-project-key "$JIRA_PROJECT_KEY" \
    --robot-browser $ROBOT_BROWSER \
    --robot-category $ROBOT_REGRESSION_CATEGORY
  artifacts:
    untracked: true
    when: always
  allow_failure: false
  only:
    variables:
      - $RUN_ROBOT_TESTS == "yes" && $PIPELINE == "developer-dip"
      - $RUN_ROBOT_TESTS == "yes" && $PIPELINE == "developer-all"
      - $RUN_ROBOT_TESTS == "yes" && $PIPELINE == "developer-dip-mip"
