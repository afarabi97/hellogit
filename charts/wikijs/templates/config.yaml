---

apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-configmap
  labels:
    component: {{ .Release.Name }}
data:
  config.yml: |
    port: 3000
    bindIP: 0.0.0.0
    ssl:
      enabled: true
      port: 3443
      provider: custom

      format: pem
      key: /etc/ssl/certs/wikijs.key
      cert: /etc/ssl/certs/wikijs.crt
      passphrase: null
      dhparam: null
    db:
      type: $(DB_TYPE)
      host: $(DB_HOST)
      port: $(DB_PORT)
      user: $(DB_USER)
      pass: $(DB_PASS)
      db: $(DB_NAME)
      storage: $(DB_FILEPATH)
      ssl: $(DB_SSL)
    trustProxy: $(TRUST_PROXY)
    logLevel: info
    offline: true
    lang:
      code: en

  wiki-setup.js: |
{{ .Files.Get "files/wiki-setup.js" | indent 4 }}

  locales.json: |
{{ .Files.Get "files/locales.json" | indent 4 }}

  en.json: |
{{ .Files.Get "files/en.json" | indent 4 }}
