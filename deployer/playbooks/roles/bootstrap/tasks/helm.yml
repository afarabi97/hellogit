- name: Downloading and Unpacking Helm
  unarchive:
    src: "{{ tfplenumoffline_dir }}/helm-{{ helm_version }}-linux-amd64.tar.gz"
    dest: /usr/local/bin/
    creates: /usr/local/bin/helm
    remote_src: no
    extra_opts: [--strip-components=1]

- name: Initializing Helm Client
  command: helm init --client-only --skip-refresh

- name: install helm plugins
  shell: "helm plugin install {{ item }}"
  with_items:
    - https://github.com/chartmuseum/helm-push

- name: Removing Default Helm Repo
  shell: helm repo remove stable
