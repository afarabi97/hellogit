<script type="text/javascript">
  $(document).ready(function(){

    // The below jinja2 filter takes all of the dropdown options and replaces
    // any spaces with underscores. In this way, we can use the resulting values
    // as IDs to identify the buttons. Each of these can react differently based
    // on which dropdown button was pressed.
    {% for option in ( dropdown_options | map('replace', ' ', '_') ) %}
    $("#{{ option }}").click(function(event){

      // These lines of code change the dropdown menu's selector to reflect the
      // option chosen. In this case, we are selecting the first child of the
      // DOM object who holds the ID {{ dropdown_id }}
      $("#{{ dropdown_id }}:first-child").text($(this).text());
      $("#{{ dropdown_id }}").val($(this).text());
    });
    {% endfor %}
  });
</script>

<form id='{{ dropdown_form_name }}' role=form class="needs-validation" novalidate>
<div class="input-group mb-3">
  <div class="input-group-prepend">
    <a href="{{ url_for('help') + '#anchor_' + dropdown_label | replace(' ','_') }}"><span class="input-group-text">{{ dropdown_label }}</span></a>
  </div>
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="{{ dropdown_id }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      {{ dropdown_text }}
    </button>
    <div class="dropdown-menu" aria-labelledby="{{ dropdown_id }}">
      {% for option in dropdown_options %}
      <button class="dropdown-item" type=button id="{{ option | replace(' ','_') }}">{{ option }}</button>
      {% endfor %}
    </div>
  </div>
</div>
</form>
