<script type="text/javascript">
  $(document).ready(function(){

    // This function activates all tooltips on the page
    // See: https://getbootstrap.com/docs/4.1/components/tooltips/ for explanation
    $('[data-toggle="tooltip"]').tooltip();

    // The below jinja2 filter takes all of the dropdown options and replaces
    // any spaces with underscores. In this way, we can use the resulting values
    // as IDs to identify the buttons. Each of these can react differently based
    // on which dropdown button was pressed.
    {% for option in ( dropdown_options | map('replace', ' ', '_') ) %}
    $("#{{ option }}").click(function(event){

      // These lines of code change the dropdown menu's selector to reflect the
      // option chosen. In this case, we are selecting the first child of the
      // DOM object who holds the ID {{ dropdown_id }}
      $("#{{ dropdown_id }}:first-child").text($(this).text());
      $("#{{ dropdown_id }}").val($(this).text());
    });
    {% endfor %}
  });
</script>

<form id='{{ dropdown_form_name }}' role=form class="needs-validation" novalidate>
<div class="input-group mb-3">
  <div class="input-group-prepend">
    <span class="input-group-text" data-toggle="tooltip" data-placement="right" title='{{ dropdown_description }}'>{{ dropdown_label }}</span>
  </div>
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="{{ dropdown_id }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      {{ dropdown_text }}
    </button>
    <div class="dropdown-menu" aria-labelledby="{{ dropdown_id }}">
      {% for option in dropdown_options %}
      <button class="dropdown-item" type=button id="{{ option | replace(' ','_') }}">{{ option }}</button>
      {% endfor %}
    </div>
  </div>
</div>
{% if dropdown_description is defined %}
<p>
  <small class="form-text text-muted">
    {{ dropdown_description }}<br>
  </small>
</p>
{% endif %}
<hr>
</form>
