
<script type="text/javascript">
  $(document).ready(function(){
    // Server events: this function handles when a user presses submit on the
    // number of servers button.
    // See: https://api.jquery.com/click/
    $('#{{ button_id }}').click(function (event) {
      // Using [0] here because when you use $( "#form_servers" ) you get a jQuery
      // selection set. To access the DOM properties you have to select the first
      // item. checkValidity is an HTML5 built in function we are calling against
      // the element.
      if ($( "#{{ button_form_name }}" )[0].checkValidity() === false) {
        event.preventDefault();
        event.stopPropagation();
      } else {
      // This is inherited from the form. button_reaction file is a file with
      // javascript defining what should happen when the button is pressed.
      // If this file is not defined, nothing happens.
      {% if button_reaction_file is defined %}
        {% include button_reaction_file %}
      {%endif %}
      }
      $( "#{{ button_form_name }}" ).addClass('was-validated');
    });

    // This function is only here so that validity appears as soon as they start
    // typing. It is effectively identical to the above except that it does not
    // include a reaction if the input is valid
    $('#{{ button_field_id }}').keyup(function (event) {
      // Using [0] here because when you use $( "#form_servers" ) you get a jQuery
      // selection set. To access the DOM properties you have to select the first
      // item. checkValidity is an HTML5 built in function we are calling against
      // the element.
      if ($( "#{{ button_form_name }}" )[0].checkValidity() === false) {
        event.preventDefault();
        event.stopPropagation();
      }
      $( "#{{ button_form_name }}" ).addClass('was-validated');
    });
});
</script>

<form id='{{ button_form_name }}' role=form class="needs-validation" novalidate>
<div class="input-group mb-3">
  <div class="input-group-prepend">
    <span class="input-group-text">{{ button_label }}</span>
  </div>
  <input name="{{ button_field_id }}" id="{{ button_field_id }}" type="{{ button_field_type | default("text", true) }}" {{ button_constraint }} class="form-control" placeholder="{{ button_placeholder }}" {{ 'required' if button_required is defined }}>
  <div class="input-group-append">
    <button class="btn btn-primary" id="{{ button_id }}" type="button">{{ button_text }}</button>
  </div>
  <div class="valid-feedback">
  {{ button_valid_feedback | default("Looks good!", true) }}
  </div>
  <div class="invalid-feedback">
  {{ button_invalid_feedback | default("This field is required", true) }}
  </div>
</div>
{% if button_description is defined %}
<p>
  <small class="form-text text-muted">
    {{ button_description }}<br>
  </small>
</p>
{% endif %}
</form>
