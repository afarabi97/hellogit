
<script>
  $(document).ready(function(){

    // This function activates all tooltips on the page
    // See: https://getbootstrap.com/docs/4.1/components/tooltips/ for explanation
    $('[data-toggle="tooltip"]').tooltip();

    // The event object generated here represents the input field of the checkbox
    // selected. target is the DOM element that initated the event. See: https://learn.jquery.com/events/event-basics/
    // The object in this case will be an HTMLInputElement. The parent class of this,
    // Element, has the attribute ID.
    {% for i in range(server_count) %}
    $("#{{ ['is_master_server', i+1] | join('_') }}").change(event, function() {
      //alert("HERE")
      if ($( '#' + event.target.id ).is(':checked')) {
        //alert("HERE1")
        $( ".master_server_checkbox" ).not( "#" + event.target.id ).each(function() {
          //alert("here")
          $( "#" + this.id ).prop( "disabled", false );
        });
      } else {
        //alert("HERE2")
        $( ".master_server_checkbox" ).not( "#" + event.target.id ).each(function() {
          $( "#" + this.id ).prop( "disabled", true );
        });
      }
    })
    {% endfor %}
  });
</script>

{# This loop goes from 0 to server_count #}
{% for i in range(server_count) %}
<div class="server_slide card">
  <div class="card-header" id="{{ ['server_accordion_header', i+1] | join('_') }}">
    <h5 class="mb-0">
      <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#{{ ['server_collapse', i+1] | join('_') }}" aria-expanded="true" aria-controls="{{ ['server_collapse', i+1] | join('_') }}">
        Server {{ i + 1 }}
      </button>
    </h5>
  </div>
  <div id="{{ ['server_collapse', i+1] | join('_') }}" class="collapse show" aria-labelledby="{{ ['server_accordion_header', i+1] | join('_') }}">
    <div class="card-body">
      <form id='{{ ['server_form', i+1] | join('_') }}' role=form class="needs-validation" novalidate>
        <div class="form-check">
          <input class="form-check-input master_server_checkbox" type="checkbox" value="" id="{{ ['is_master_server', i+1] | join('_') }}">
          <label id='{{ ['is_master_server_label', i+1] | join('_') }}' class="form-check-label" for="{{ ['is_master_server', i+1] | join('_') }}" data-toggle="tooltip" data-placement="right" title='{{ form.server_is_master_server_checkbox.tooltip_text }}'>
            Is Kubernetes master server?
          </label>
        </div>
      </form>
    </div>
  </div>
</div>
{% endfor %}
