---
- name: redis | Add yum repo
  yum_repository:
    name: remi
    description: remi
    enabled: false
    gpgcheck: true
    gpgkey: https://rpms.remirepo.net/RPM-GPG-KEY-remi
    mirrorlist: http://cdn.remirepo.net/enterprise/7/remi/mirror


- name: redis | Install
  dnf:
    name: redis
    state: present
    enablerepo: remi

- name: redis | Enable Service
  systemd:
    name: redis
    enabled: yes

- name: redis | Remove yum repo
  yum_repository:
    name: remi
    state: absent

- name: redis | Disable Persistence
  lineinfile:
    path: /etc/redis.conf
    state: absent
    regexp: '^save'
