---

- name: Include Pip Setup
  include_role:
    name: common
    tasks_from: pip

- set_fact:
    pip_path: "{{ tfplenum_root_dir }}/.venv/bin/pip3"

- set_fact:
    pip_path: "/usr/local/bin/pip3"
  when: rpm_build

- name: "Download pip packages to the custom install repo"
  shell: "{{ pip_path }} download -d {{ tfplenumoffline_dir }}/pip -r {{ tfplenum_root_dir }}/requirements.txt"

# TODO: broken module with python38
- name: create pip repo
  shell: "dir2pi {{ tfplenumoffline_dir }}/pip"
