<div class="main-content2">
  <mat-card>
    <mat-card-header>
        <mat-card-title>Managed Kits : {{ kitSelected }}</mat-card-title>
    </mat-card-header>
      <mat-tab-group>
        <mat-tab label="Local">
          <mat-card>
            <mat-card-content fxLayout="column" fxLayoutAlign="space-around stretch">
                <table mat-table class="selector" mat-table [dataSource]="dashboard_status" aria-describedby="dashboard-status-table">
                    <ng-container matColumnDef="ipaddress" >
                        <th scope="col" mat-header-cell *matHeaderCellDef>IP Address</th>
                        <td mat-cell *matCellDef="let localhost;">localhost</td>
                    </ng-container>
                    <ng-container matColumnDef="elasticsearch_status" >
                      <th scope="col" mat-header-cell *matHeaderCellDef>Elasticsearch Status</th>
                      <td mat-cell *matCellDef="let status;">
                        <mat-icon matSuffix *ngIf="status.elasticsearch_status === 'green'"
                          style="color: lightgreen;" matTooltip="{{ status.elasticsearch_status }}">
                          check_circle
                        </mat-icon>
                        <mat-icon matSuffix *ngIf="status.elasticsearch_status === 'yellow'"
                          style="color: yellow;" matTooltip="{{ status.elasticsearch_status }}">
                          warning
                        </mat-icon>
                        <mat-icon *ngIf="status.elasticsearch_status === 'red'"
                          style="color: darkred;" matTooltip="{{ status.elasticsearch_status }}">
                          error
                        </mat-icon>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="kibana_status" >
                      <th scope="col" mat-header-cell *matHeaderCellDef>Kibana Status</th>
                        <td mat-cell  *matCellDef="let status;">
                          <mat-icon matSuffix *ngIf="status.kibana_status === 'green'"
                            style="color: lightgreen;" matTooltip="{{ status.kibana_status }}">
                            check_circle
                          </mat-icon>
                          <mat-icon matSuffix *ngIf="status.kibana_status === 'yellow'"
                            style="color: yellow;" matTooltip="{{ status.kibana_status }}">
                            warning
                          </mat-icon>
                          <mat-icon *ngIf=" status.kibana_status === 'red'"
                            style="color: darkred;" matTooltip="{{ status.kibana_status }}">
                            error
                          </mat-icon>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="get_column_definition(false)"></tr>
                    <tr mat-row *matRowDef="let row; columns: get_column_definition(false);" (click)="kit_select(null)" [class.highlight]="kitSelected == 'localhost'"></tr>
                </table>
            </mat-card-content>
          </mat-card>
        </mat-tab >
        <mat-tab label="Remote" *ngIf="remote_dashboard_status && remote_dashboard_status.length > 0">
          <mat-card>
            <mat-card-content fxLayout="column" fxLayoutAlign="space-around stretch">
              <table mat-table class="selector" *ngIf="remote_dashboard_status" mat-table [dataSource]="remote_dashboard_status"
                     aria-describedby="remote-dashboard-status-table">
                  <ng-container matColumnDef="hostname" >
                    <th scope="col" mat-header-cell *matHeaderCellDef>Hostname</th>
                    <td mat-cell *matCellDef="let status;">
                      <a target="_blank" href="https://{{ status.hostname }}">{{ status.hostname }}</a>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="ipaddress" >
                      <th scope="col" mat-header-cell *matHeaderCellDef>IP Address</th>
                      <td mat-cell *matCellDef="let status;">{{ status.ipaddress }}</td>
                  </ng-container>
                  <ng-container matColumnDef="elasticsearch_status" >
                    <th scope="col" mat-header-cell *matHeaderCellDef>Elasticsearch Status</th>
                    <td mat-cell *matCellDef="let status;">
                      <mat-icon matSuffix *ngIf="status.elasticsearch_status === 'green'"
                        style="color: lightgreen;" matTooltip="{{ status.elasticsearch_status }}">
                        check_circle
                      </mat-icon>
                      <mat-icon matSuffix *ngIf="status.elasticsearch_status === 'yellow' || !status.elasticsearch_status"
                        style="color: yellow;" matTooltip="{{ status.elasticsearch_status ? status.elasticsearch_status : kit_unavail }}">
                        warning
                      </mat-icon>
                      <mat-icon *ngIf=" status.elasticsearch_status === 'red'"
                        style="color: darkred;" matTooltip="{{ status.elasticsearch_status }}">
                        error
                      </mat-icon>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="kibana_status" >
                    <th scope="col" mat-header-cell *matHeaderCellDef>Kibana Status</th>
                    <td mat-cell *matCellDef="let status;">
                      <mat-icon matSuffix *ngIf="status.kibana_status === 'green'"
                        style="color: lightgreen;" matTooltip="{{ status.kibana_status }}">
                        check_circle
                      </mat-icon>
                      <mat-icon matSuffix *ngIf="!status.kibana_status"
                        style="color: yellow;" matTooltip="{{ kit_unavail }}">
                        warning
                      </mat-icon>
                      <mat-icon *ngIf="status.kibana_status === 'red'"
                        style="color: darkred;" matTooltip="{{ status.kibana_status }}">
                        error
                      </mat-icon>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="actions" >
                    <th scope="col" mat-header-cell *matHeaderCellDef>Actions</th>
                    <td mat-cell *matCellDef="let status;">
                      <button *ngIf="status.kibana_status" mat-button matTooltip="Click to display kibana login info." color="primary"
                        (click)="kibana_info(status.ipaddress)">
                        <em class="material-icons">info</em>
                      </button>
                    </td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="get_column_definition(true)"></tr>
                  <tr mat-row *matRowDef="let row; columns: get_column_definition(true);" (click)="kit_select(row)" [class.selected]="row === status" [class.highlight]="row.ipaddress == kitSelected"></tr>
              </table>
            </mat-card-content>
          </mat-card>
      </mat-tab>
    </mat-tab-group>
  </mat-card>
  <br>
  <app-health-dashboard-node-table [token]="token"></app-health-dashboard-node-table>
  <br>
  <app-health-dashboard-pod-table [token]="token"></app-health-dashboard-pod-table>
  <ng-container *ngIf="is_gip && !token">
    <br>
    <app-health-dashboard-snmp></app-health-dashboard-snmp>
    <br>
    <app-health-dashboard-datastores></app-health-dashboard-datastores>
  </ng-container>
</div>
