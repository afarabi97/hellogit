<h2 mat-dialog-title id="app-kickstart-form-restore-h2-data-title">Restore {{ data.title }}</h2>
<mat-dialog-content>
    <p>Please select an archived Kickstart form. Keep in mind restoring a form will remove your current configuration.</p>
    <div *ngIf="!showSelectedRow; else viewSelection">
        <table mat-table [dataSource]="dataSource" aria-describedby="Archive Table">
            <!-- Checkbox Column Select -->
            <ng-container matColumnDef="select">
                <th scope="col" mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let row; let i = index;"
                    id="{{ 'app-kickstart-form-restore-mat-dialog-content-div-table-td-' + i + '-select' }}">
                    <mat-checkbox id="{{ 'app-kickstart-form-restore-mat-dialog-content-div-table-td-' + i + '-select-mat-checkbox' }}"
                                  (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                                  [checked]="selection.isSelected(row)" disableRipple=true>
                    </mat-checkbox>
                </td>
            </ng-container>
            <!-- Archive Date Column -->
            <ng-container matColumnDef="archived_date">
                <th scope="col" mat-header-cell *matHeaderCellDef>Archived Date</th>
                <td mat-cell *matCellDef="let element; let i = index;"
                    id="{{ 'app-kickstart-form-restore-mat-dialog-content-div-table-td-' + i + '-archived-date' }}">{{ element.archive_date }}</td>
            </ng-container>
            <!-- Comment Column -->
            <ng-container matColumnDef="comment">
                <th scope="col" mat-header-cell *matHeaderCellDef>Comment</th>
                <td mat-cell *matCellDef="let element; let i = index;"
                    id="{{ 'app-kickstart-form-restore-mat-dialog-content-div-table-td-' + i + '-comment' }}">{{ element.comment }}</td>
            </ng-container>
            <!-- Actions Column -->
            <ng-container matColumnDef="actions">
                <th scope="col" mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let element; let i = index;"
                    id="{{ 'app-kickstart-form-restore-mat-dialog-content-div-table-td-' + i + '-actions' }}">
                    <button mat-icon-button id="{{ 'app-kickstart-form-restore-mat-dialog-content-div-table-td-' + i + '-actions-button-menu' }}"
                            (click)="$event.stopPropagation()" [matMenuTriggerFor]="menu"
                            [matMenuTriggerData]="{ row: element, menu_element_id: 'app-kickstart-form-restore-div-table-td-' + i + '-actions-button-menu' }"
                            (menuOpened)="viewSelectedItem(element)">
                      <mat-icon id="{{ 'app-kickstart-form-restore-mat-dialog-content-div-table-td-' + i + '-actions-button-mat-icon-more-vert' }}">more_vert</mat-icon>
                    </button>
                </td>
            </ng-container>
            <!-- Table Rows -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index;"
                id="{{ 'app-kickstart-form-restore-mat-dialog-content-div-table-tr-mat-row-' + i }}"
                (click)="selection.toggle(row)"></tr>
        </table>
        <mat-paginator id="app-kickstart-form-restore-mat-dialog-content-div-mat-paginator"
                       [pageSizeOptions]="[5, 10]" showFirstLastButtons></mat-paginator>
    </div>
    <ng-template #viewSelection>
        <button mat-icon-button id="app-kickstart-form-restore-mat-dialog-content-button"
                color="primary" (click)="showSelectedRow = false">
          <mat-icon id="app-kickstart-form-restore-mat-dialog-content-button-mat-icon-keyboard-backspace">keyboard_backspace</mat-icon>
        </button>
        <pre>
          <code id="app-kickstart-form-restore-mat-dialog-content-pre-code">{{ selection.selected[0] | json }}</code>
        </pre>
    </ng-template>
</mat-dialog-content>
<mat-dialog-actions fxLayout="row" fxLayoutAlign="end center">
    <button mat-raised-button id="app-kickstart-form-restore-mat-dialog-actions-button-cancel"
            (click)="dialogRef.close()">Cancel</button>
    <button mat-raised-button id="app-kickstart-form-restore-mat-dialog-actions-button-restore"
            color="primary" [mat-dialog-close]="selection.selected" [disabled]="selection.selected.length < 1">Restore</button>
</mat-dialog-actions>
<mat-menu #menu="matMenu">
    <ng-template matMenuContent let-row="row" let-menu_element_id="menu_element_id">
      <button mat-menu-item *ngIf="!delete" id="{{ menu_element_id + '-button-view' }}"
              matTooltip="View archived {{ data.title }}" (click)="showSelectedRow = true">
        <mat-icon id="{{ menu_element_id + '-button-view-mat-icon-pageview' }}">pageview</mat-icon><span>View</span>
      </button>
      <button mat-menu-item *ngIf="!delete" id="{{ menu_element_id + '-button-delete' }}"
              matTooltip="Delete this archived {{ data.title }}" (click)="delete = true; $event.stopPropagation()">
        <mat-icon id="{{ menu_element_id + '-button-delete-mat-icon-delete' }}" color="warn">delete</mat-icon><span>Delete</span>
      </button>
      <button mat-menu-item *ngIf="delete" id="{{ menu_element_id + '-button-cancel' }}"
              matTooltip="Cencel Delete" (click)="delete = false; $event.stopPropagation()">
        <mat-icon id="{{ menu_element_id + '-button-cancel-mat-icon-cancel' }}">cancel</mat-icon><span>Cancel</span>
      </button>
      <button mat-menu-item *ngIf="delete" id="{{ menu_element_id + '-button-confirm' }}"
              matTooltip="Confirm Delete" (click)="delete = false; deleteArchive(row)">
        <mat-icon id="{{ menu_element_id + '-button-confirm-mat-icon-delete-forever' }}" color="warn">delete_forever</mat-icon><span>Confirm</span>
      </button>
    </ng-template>
</mat-menu>