<form [formGroup]="agentInstallerForm" (ngSubmit)="onSubmit">
  <div class="container" id="topheader">
    <div class="card">
      <div class="card-header">
        Agent Installer: Install Windows Agents
      </div>
      <div class="card-body">

        <div class="card" style="margin-bottom: 15px;">
          <div class="card-body" style="border: 1px solid green;border-radius: 1rem;">
            <h5>Page Instructions</h5>
            <p class="card-text">
              This page allows you install Windows monitoring agents.
            </p>
          </div>
          <br>
          <h5>Installer Configurations</h5>
              <app-card-selector [parentForm]="agentInstallerForm" controlName="installer_select">
              </app-card-selector>
          <br>
          <div class="card">
            <h5>Windows Remote Admin Credentials</h5>
            <app-text-input [parentForm]="agentInstallerForm.windows_credentials" controlName="user_name"></app-text-input>
            <app-text-input [parentForm]="agentInstallerForm.windows_credentials" controlName="password"></app-text-input>
          </div>
          <br>
          <H5>Remote Targets</H5>
          <div *ngFor="let target of targets.controls; let i=index" class="card">
            <div class="card-body">
              <app-text-input [parentForm]="target" controlName='ip_address' uid="{{i}}" style="float:left">
              </app-text-input>
              <button class="btn btn-danger" type="button" style="float:right" (click)="removeTarget(i)">
                <i class="icon_close_alt2"></i>
              </button>
            </div>
          </div>
          <div class="card-header">
            <button name="add_target" class="btn btn-primary" type="button" (click)="addTarget()"
              [disabled]="!targets.valid">
              <i class="icon_plus_alt2"></i> Add Windows Target</button>
          </div>
        </div>
      </div>
    </div>
    <br>
    <div class="card">
      <div class="card-header">
        Validation
      </div>
      <div class="card-body" id="validation">
        <p *ngIf="agentInstallerForm.readyToInstall" class='text-success'>Looks good! Press 'Install Agents' whenever
          you're
          ready!</p>
        <div *ngIf="!agentInstallerForm.readyToInstall">
          <p *ngFor="let error of agentInstallerForm.errors | keyvalue;" class='text-danger'>{{ error.key }} -
            {{error.value}} </p>
        </div>
      </div>
      <div class="card-footer">
        <button class="btn btn-primary" type="submit" [disabled]="!agentInstallerForm.readyToInstall"
          name="install_agents">Install Agents</button>
      </div>
    </div>
  </div>
</form>
