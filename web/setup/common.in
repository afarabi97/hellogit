function run_cmd {
	local command="$@"
	eval $command
	local ret_val=$?
	if [ $ret_val -ne 0 ]; then
		echo "$command returned error code $ret_val"
        exit 1
	fi
}

function _install_angular(){
	pushd $FRONTEND_DIR/frontend > /dev/null
	run_cmd npm install -g npm@~6.13.4
    run_cmd npm install -g @angular/cli@~8.3.21
	run_cmd npm cache verify
    run_cmd npm install
	npm audit fix
	popd > /dev/null
}

function _deploy_angular_application {
	pushd $FRONTEND_DIR/frontend > /dev/null
    run_cmd rm -rf dist/frontend
    run_cmd rm -rf /var/www/html/frontend
    run_cmd ng build --prod
	run_cmd cp -r dist/frontend /var/www/html/
	popd > /dev/null
}

function _restart_services {
	run_cmd systemctl restart httpd
	run_cmd systemctl restart tfplenum-frontend.service
	run_cmd systemctl restart mongod
    run_cmd systemctl restart redis
    run_cmd systemctl restart celery.service
}
