---
- name: labrepo
  yum_repository:
    name: rhel-7-server-rpms
    description: rhel 7 server rpms
    file: labrepo
    baseurl: http://yum.labrepo.sil.lab/rhel/rhel-7-server-rpms
    enabled: yes

- name: ensure a list of packages installed
  yum:
    name: "{{ packages }}"
  vars:
    packages:
    - unzip
    - chrony
    - ntp 
    - samba
    - xinetd

- name: yum-clean-all
  command: yum clean all
  args:
    warn: no

- name: Remove repository from a specific repo file
  yum_repository:
    name: rhel-7-server-rpms
    file: labrepo
    state: absent
